<!doctype html>
<html>
<head>
    <meta charset = "utf-8" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css"/>
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='pictures/logo.png') }}"/>
    <title>Free chat</title>
</head>

<!-- BODY -->
<body>
    <!-- HEADER - search + home -->
    <header>
        <!-- GO HOME -->
        <div class="go_home_boy">
            <a href="{{ url_for('home') }}">
                <h2>Home</h2>
            </a>
        </div>

        <!-- SEARCH -->
        <div id="search_bar_box">
            <!-- TODO searchbar -->
            <form action="{{ url_for('search') }}" id="search_bar_form" >
                <input type="text" placeholder="Search.." name="search" id="search_bar_input">
                <img src="{{url_for('static', filename='pictures/search.png')}}" alt="Search bar" id="search_bar_icon"/>
            </form>
        </div>

        <!-- LOGOUT -->
        <div class="logout_container">            
            <a href="{{ url_for('logout') }}">
                <button>Logout</button>
            </a>
        </div>
    </header>

    <!-- PROFILE -->
    <div id="profile">
        <!-- PROFILE PICTURE CONTAINTER -->
        <div class="picture_container">
            <img src="{{ img_src }}" alt="Profile picture" class="profile_picture">
        </div>

        <!-- PROFILE INFO CONTAINER -->
        <div id="info_container">
            <h1>{{ username }}</h1><br>
            <p>{{ name }}</p>
            <p>{{ surname}}</p>
            <p>{{ description }}</p>
            <br>
            {% if admin or owner %}
            <button type="button" onclick="show_settings()">Settings</button>
            {% endif %}
        </div>
    </div>

    <!-- PROFILE SETTINGS -->
    <div id="settings_container">
        <form action="{{ url_for('user_settings', name=username) }}" method="POST">
            <h1>Settings</h1><br>

            <label for="login"><b>Change Login</b></label>
            <input name="login" type="text" placeholder="Enter Login" class="input_box" 
            {% if form  %} value="{{ form['login'] }}"{% endif %}
            pattern="^([\x00-\x7F])\S+$" title="ASCII characters only, no white spaces">

            <label for="fname"><b>Change first name</b></label>
            <input name="fname" id ="fname" type="text" placeholder="Enter First Name" class="input_box">

            <label for="lname"><b>Change last name</b></label>
            <input type="text" name="lname" id="lname" placeholder="Enter Last Name" class="input_box">

            <label for="password1"><b>Change Password</b></label>
            <input name="password1" type="password" placeholder="Enter Password" autocomplete="new-password" class="input_box">

            <label for="password2"><b>Repeat Password</b></label>
            <input name="password2" type="password" placeholder="Repeat Password" autocomplete="new-password" class="input_box">

            <label for="group_picture"><b>Profile picture</b></label>
            <input name="profile_photo" type="image" placeholder="Profile pricture" capture><br><br>

            <br>
            <label for="group_privacy"><b>Visibility for:</b></label><br>
            <input name="visibility" type="radio" id="visibility1" value="30">
            <label for="visibility1">All users</label><br>
            <input name="visibility" type="radio" id="visibility2" value="60">
            <label for="visibility2">Registered users</label><br>
            <input name="visibility" type="radio" id="visibility3" value="100">
            <label for="visibility3">Members of your groups</label><br><br>    
            
            <label for="description"><b>Description</b></label>
            <input type="text" name="description" id="description" placeholder="Enter Description" class="input_box"><br>

            <label for="current_password"><b>Enter current password</b></label>
            <input name="current_password" type="password" placeholder=" Requiered, enter current password" class="input_box" required>

            {% if admin or owner %}
            <button formaction="{{ url_for('delete_profile', name=username) }}">Delete profile</button>

            <button type="submit">Save changes</button> <button type="button" onclick="show_profile_info()">Go Back</button>
            {% endif %}
        </form>
    </div>
</body>

<!-- JavaScript -->
<script>
    function show_settings(){
        document.getElementById("settings_container").style.display= 'block';
        document.getElementById("profile").style.display= 'none';
    }
    function show_profile_info(){
        document.getElementById("settings_container").style.display= 'none';
        document.getElementById("profile").style.display= 'block';
    }
</script>
</html>
</doctype>
